<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dashboard | BookHub Digital Library</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/style.css">
    
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="logo d-flex align-items-center">
            <i class="fa-solid fa-book-open-reader fs-2 text-white me-2"></i>
            <a href="index.html" class="text-white text-decoration-none fs-3 fw-bold">BookHub</a>
        </div>
        
        <ul class="d-flex list-unstyled mb-0">
            <li>
                <a href="index.html">Home</a>
            </li>
            <li>
                <a href="books.html">Collection</a>
            </li>
            <li>
                <a href="account.html">Account</a>
            </li>
            <li>
                <a href="contact.html">Contact</a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="container-fluid py-4">
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="fw-bold" style="color: #7D71A7;">BOOKS</h1>
                <div class="d-flex align-items-center">
                    <p class="mb-0 text-muted welcome-message">Explore your digital library</p>
                </div>
            </div>
        </div>

        <!-- Reading Content -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3" style="color: #5A4F7A;">Reading Status</h3>
                <div class="d-flex flex-wrap gap-3">
                    <div class="reading-status-card">
                        <div class="status-number"><i class="fa-solid fa-book-bookmark"></i> 33</div>
                        <div class="status-label">Are Read</div>
                    </div>
                    <div class="reading-status-card">
                        <div class="status-number"><i class="fa-solid fa-book-open"></i> 8</div>
                        <div class="status-label">In Progress</div>
                    </div>
                    <div class="reading-status-card">
                        <div class="status-number"><i class="fa-regular fa-square-plus"></i> 12</div>
                        <div class="status-label">New</div>
                    </div>
                    <div class="reading-status-card">
                        <div class="status-number"><i class="fa-regular fa-circle-down"></i> 16</div>
                        <div class="status-label">Downloaded</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Library Content (kiro hk lib rekomen) -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3" style="color: #5A4F7A;">Library Collection</h3>
                <div class="books-grid">
                    <!-- Book 1 -->
                    <div class="book-card">
                        <div class="book-cover">
                            <img src="images/cover-books/index-page/the-correspondent.jpg" alt="The correspondent">
                        </div>
                        <div class="book-title">THE CORRESPONDENT</div>
                         <button class="btn-borrow">Borrow</button>
                        <div class="rating">
                            <i class="fa-solid fa-star"></i> 4.5
                        </div>
                        <p class="author">by Virginia Evans</p>
                    </div>
                    
                    <!-- Book 2 -->
                    <div class="book-card">
                        <div class="book-cover">
                            <img src="images/cover-books/index-page/the-widow.jpg" alt="The Widow">
                        </div>
                        <div class="book-title">THE WIDOW</div>
                         <button class="btn-borrow">Borrow</button>
                        <div class="rating">
                            <i class="fa-solid fa-star"></i> 3.3
                        </div>
                        <p class="author">by John Grisham</p>
                    </div>
                    
                    <!-- Book 3 -->
                    <div class="book-card">
                        <div class="book-cover">
                            <img src="images/cover-books/index-page/harry-potter-and-the-chamber-of-secrets.jpg" alt="Harry Potter and the Chamber of Secrets">
                        </div>
                        <div class="book-title">HARRY POTTER AND THE CHAMBER OF SECRETS</div>
                         <button class="btn-borrow">Read</button>
                        <div class="rating">
                            <i class="fa-solid fa-star"></i> 4.8
                        </div>
                        <p class="author">by J.K. Rowling</p>
                    </div>
                    
                    <!-- Book 4 -->
                    <div class="book-card">
                        <div class="book-cover">
                            <img src="images/cover-books/index-page/home.jpg" alt="Home">
                        </div>
                        <div class="book-title">HOME</div>
                         <button class="btn-borrow">Read</button>
                        <div class="rating">
                            <i class="fa-solid fa-star"></i> 4.4
                        </div>
                        <p class="author">by Shayna Krishnasamy</p>
                    </div>
                    
                    <!-- Book 5 -->
                   <div class="book-card">
                        <div class="book-cover">
                            <img src="images/cover-books/index-page/the-hired-girl.jpg" alt="The Hired Girl">
                        </div>
                        <div class="book-title">THE HIRED GIRL</div>
                         <button class="btn-borrow">Read</button>
                        <div class="rating">
                            <i class="fa-solid fa-star"></i> 4.2
                        </div>
                        <p class="author">by Laura Amy Schlitz</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Keep Reading Section -->
        <div class="row mb-4">
            <div class="col-12">
                <h3 class="mb-3" style="color: #5A4F7A;">Keep Reading</h3>
                <div class="keep-reading-grid">
                   <div class="keep-reading-card">
                    <div class="book-cover">
                        <img src="images/cover-books/index-page/the-hired-girl.jpg" alt="The Hired Girl">
                    </div>
                    <div class="keep-reading-content">
                        <div class="keep-reading-title">THE HIRED GIRL</div>
                        <p class="keep-reading-author">Laura Amy Schlitz</p>
                    </div>
                </div>
                <div class="keep-reading-card">
                    <div class="book-cover">
                        <img src="images/cover-books/index-page/romancing-orange-county.jpg" alt="Romancing orange county">
                    </div>
                    <div class="keep-reading-content">
                        <div class="keep-reading-title">ROMANCING ORANGE COUNTY</div>
                        <p class="keep-reading-author">Orange County Romance Writers</p>
                    </div>
                </div>
                <div class="keep-reading-card">
                    <div class="book-cover">
                        <img src="images/cover-books/index-page/maid-for-each-other.jpg" alt="Maid for each other">
                    </div>
                    <div class="keep-reading-content">
                        <div class="keep-reading-title">MAID FOR EACH OTHER</div>
                        <p class="keep-reading-author">Lynn Painter</p>
                    </div>
                </div>
                <div class="keep-reading-card">
                    <div class="book-cover">
                        <img src="images/cover-books/index-page/harry-potter-and-the-philosopher-s-stone.jpg" alt="Harry Potter and the Philosopher's Stone">
                    </div>
                    <div class="keep-reading-content">
                        <div class="keep-reading-title">HARRY POTTER AND THE PHILOSOPHER'S STONE</div>
                        <p class="keep-reading-author">J.K. Rowling</p>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- Carta/Graf -->
        <div class="row">
            <!-- Pie Chart: Favorite Genres -->
            <div class="col-lg-6 mb-4">
                <div class="chart-card">
                    <div class="chart-header">
                        <h5><i class="fas fa-chart-pie me-2"></i>Favorite Genres</h5>
                    </div>
                    <div class="chart-body">
                        <!-- TAMBAH DIV WRAPPER UNTUK TENGAH -->
                        <div class="chart-center-wrapper">
                            <div class="chart-container-large">
                                <canvas id="genreChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-summary mt-3">
                            <p class="mb-1"><strong>Top Genre:</strong> Fiction (35%)</p>
                            <p class="mb-0"><strong>Total Categories:</strong> 7</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bar Chart: Reading Hours -->
            <div class="col-lg-6 mb-4">
                <div class="chart-card">
                    <div class="chart-header">
                        <h5><i class="fas fa-chart-bar me-2"></i>Weekly Reading Hours</h5>
                    </div>
                    <div class="chart-body">
                        <div class="chart-container-large">
                            <canvas id="readingHoursChart"></canvas>
                        </div>
                        <div class="chart-summary mt-3">
                            <p class="mb-1"><strong>Daily Average:</strong> 4.1 hours</p>
                            <p class="mb-0"><strong>Week Total:</strong> 28.5 hours</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="social-media">
            <a href="#"><i class="fa-brands fa-facebook"></i></a>
            <a href="#"><i class="fa-brands fa-threads"></i></a>
            <a href="#"><i class="fa-brands fa-instagram"></i></a>
        </div>
        <p>&copy; by BookHub Digital Library | All Rights Reserved</p>
        <p>Last updated: 2025</p>
    </footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function() 
    {
        // Update welcome message if user exists
        const currentUser = JSON.parse(localStorage.getItem('current_user'));
        if (currentUser) 
        {
            const welcomeElement = document.querySelector('.welcome-message');
            if (welcomeElement) {
                welcomeElement.textContent = `Welcome back, ${currentUser.fullname || currentUser.username}!`;
            }
        }
        
       // DONUT CHART: Favorite Genres 
        const xValues = ["Fiction", "Mystery", "Romance", "Sci-Fi", "Non-Fiction", "Action", "Horror"];
        const yValues = [35, 20, 15, 12, 8, 6, 3];
        const barColors = ['#7D71A7', '#CAADFF', '#FFC2E2', '#FFADC7', '#FCF6D9', '#D9B8FF', '#B8E1FF'];

        const genreCtx = document.getElementById('genreChart').getContext('2d');

        new Chart(genreCtx, 
        {
            type: "doughnut",
            data: 
            {
                labels: xValues, 
                datasets: 
                [{
                    backgroundColor: barColors,
                    data: yValues
                }]
            },
            options: 
            {
                responsive: true,
                maintainAspectRatio: true,  
                plugins: 
                {
                    legend: 
                    {
                        display: true,
                        position: 'right' 
                    },
                    title: 
                    {
                        display: true,
                        text: "Favorite Genres",
                        font: {size: 16}
                    }
                }
            }
        });
        
        // 2. BAR CHART: Weekly Reading Hours
        const hoursCtx = document.getElementById('readingHoursChart').getContext('2d');
        
        new Chart(hoursCtx, 
        {
            type: "bar",
            data: 
            {
                labels: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                datasets: 
                [{
                    backgroundColor: ["#7D71A7", "#CAADFF", "#FFC2E2", "#FFADC7", "#FCF6D9", "#D9B8FF", "#B8E1FF"],
                    data: [4.2, 3.8, 5.5, 4.0, 6.2, 2.5, 3.5]
                }]
            },
            options: 
            {
                responsive: true,
                maintainAspectRatio: false,
                plugins: 
                {
                    legend: {display: false},
                    title: 
                    {
                        display: true,
                        text: "Weekly Reading Hours",
                        font: {size: 16}
                    }
                },
                
            }
        });
    });
</script>
</body>
</html>